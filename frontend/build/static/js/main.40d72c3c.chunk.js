(this["webpackJsonpproject-mkb"]=this["webpackJsonpproject-mkb"]||[]).push([[0],{49:function(e,t){},52:function(e,t,a){e.exports=a(88)},60:function(e,t,a){},85:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);a(53),a(54);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),c=(a(60),a(3)),i=a(4),l=a(6),u=a(5),m=a(7),p=a(14),d=(n.Component,a(15)),h=a(24),E=(n.Component,a(20)),f=a(29),b=function(){return r.a.createElement("footer",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6 text-center text-md-left"},r.a.createElement("p",null,"\xa9 2019 Project MKB - All Rights Reserved.")),r.a.createElement("div",{className:"col-12 col-md-6 text-center text-md-right"},r.a.createElement("a",{href:"https://www.instgram.com"},r.a.createElement(E.a,{icon:f.b})),r.a.createElement("a",{href:"https://www.facebook.com"},r.a.createElement(E.a,{icon:f.a})),r.a.createElement("a",{href:"https://www.twitter.com"},r.a.createElement(E.a,{icon:f.c})))))},g=a(10),v=a(12),y=a.n(v),S=a(22),w=a(18),N=a.n(w),O=function(){return function(e){localStorage.removeItem("token"),delete N.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"}),console.log("Successfully signed out")}},U=function(e){var t="Bearer ".concat(e);localStorage.setItem("token",t),N.a.defaults.headers.common.Authorization=t},_={signoutUser:O},j=(Object(g.a)(null,_)((function(e){return r.a.createElement("button",{className:"btn btn-warning",onClick:e.signoutUser},"Sign Out")})),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",confirmPassword:""},a.handleChange=function(e){a.setState(Object(d.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(S.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.registerUser(a.state,a.props.history);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user,t=e.error?r.a.createElement("div",{className:"text-danger mb-3"},e.error.message):null;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col mt-5"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{required:!0,onChange:this.handleChange,value:this.state.email,type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,onChange:this.handleChange,value:this.state.password,type:"password",className:"form-control",id:"password",placeholder:"Password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement("input",{required:!0,onChange:this.handleChange,value:this.state.confirmPassword,type:"password",className:"form-control",id:"confirmPassword",placeholder:"Password"})),t,r.a.createElement("button",{disabled:e.isLoading,type:"submit",className:"btn btn-success"},e.isLoading?r.a.createElement("div",{className:"spinner-border text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):"Submit"))),r.a.createElement("div",{className:"col"})))}}]),t}(n.Component)),R={registerUser:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"USER_REGISTER_REQUEST"}),a.prev=1,a.next=4,N.a.post("http://localhost:5000/users/signup",e);case 4:r=a.sent,console.log("welcome ".concat(r.data.email)),U(r.data.token),n({type:"USER_REGISTER_SUCCESS",payload:r.data}),t.push("/"),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(1),o=a.t0.response.data.error,console.log(o),n({type:"USER_REGISTER_FAILURE",payload:o});case 16:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}},C=(Object(g.a)((function(e){return{user:e.user}}),R)(j),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleInputChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(d.a)({},r,n))},e.handleSubmit=function(t){t.preventDefault(),e.props.loginUser(e.state,e.props.history)},e.state={email:"",password:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user,t=e.error?r.a.createElement("div",{className:"text-danger mb-3"},e.error.message):null;return r.a.createElement("div",{id:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement("h2",null,"Welcome Back"))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",name:"email",onChange:this.handleInputChange,value:this.state.email}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",name:"password",onChange:this.handleInputChange,value:this.state.password})),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"exampleCheck1"}),r.a.createElement("a",{href:"http://www.google.com"},"Forgot your password?")),t,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login")))),r.a.createElement(b,null))}}]),t}(n.Component)),T={loginUser:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"USER_LOGIN_REQUEST"}),a.prev=1,a.next=4,N.a.post("http://localhost:5000/users/signin",e);case 4:r=a.sent,U(r.data.token),n({type:"USER_LOGIN_SUCCESS",payload:r.data}),t.push("/"),console.log("Welcome ".concat(r.data.email)),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(1),o=a.t0.response.data.error,console.log(o),n({type:"USER_LOGIN_FAILURE",payload:o});case 16:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}},x=(Object(g.a)((function(e){return{user:e.user}}),T)(C),a(30)),A=(n.Component,n.Component,n.Component,a(51)),L=(a(85),{badge:{fontSize:"17px",margin:"0 5px 5px 0"},xBtn:{fontSize:"12px",marginLeft:"4px",padding:"0 4px"}}),k=function(e){return r.a.createElement("span",{style:L.badge,className:"badge badge-success"},e.pref,r.a.createElement("button",{type:"button",style:L.xBtn,className:"btn btn-outline-light",onClick:function(){return e.handlePrefRemove(e.pref)}},"X"))},P=function(e){var t=e.isLoading;return r.a.createElement("button",{disabled:t,type:"submit",className:"btn btn-success"},t?r.a.createElement("div",{className:"spinner-border text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):"Submit")},I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={displayName:"",preference:"",preferences:[],country:"",cuisine:""},a.updateStateFromProps=function(e){a.setState({displayName:e.displayName||"",preferences:e.preferences||[],country:e.country||"",cuisine:e.cuisine||""})},a.handleChange=function(e){a.setState(Object(d.a)({},e.target.id,e.target.value))},a.handlePrefAdd=function(){var e=a.state.preference.trim().toLowerCase();e&&a.setState((function(t){return t.preferences.indexOf(e)>-1?(alert("Tag already exists"),t):{preferences:[].concat(Object(A.a)(t.preferences),[e])}}))},a.handlePrefRemove=function(e){a.setState((function(t){return{preferences:t.preferences.filter((function(t){return t!==e}))}}))},a.handleSubmit=function(e){e.preventDefault(),a.props.updateUser(a.state,a.props.history)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updateStateFromProps(this.props.user)}},{key:"componentDidUpdate",value:function(e){this.props.user.isLoading!==e.user.isLoading&&this.updateStateFromProps(this.props.user)}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"displayName"},"Display Name"),r.a.createElement("input",{type:"text",className:"form-control",id:"displayName",onChange:this.handleChange,value:this.state.displayName})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"preference"},"Preference"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"form-control pref",id:"preference",onChange:this.handleChange,value:this.state.preference}),r.a.createElement("button",{type:"button",onClick:this.handlePrefAdd,className:"btn btn-outline-success"},"ADD"))),this.state.preferences.map((function(t,a){return r.a.createElement(k,{key:a,pref:t,handlePrefRemove:e.handlePrefRemove})})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"country"},"Country"),r.a.createElement("input",{type:"text",className:"form-control",id:"country",onChange:this.handleChange,value:this.state.country})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cuisine"},"Cuisine"),r.a.createElement("input",{type:"text",className:"form-control",id:"cuisine",onChange:this.handleChange,value:this.state.cuisine})),r.a.createElement(P,{isLoading:t.isLoading})))))}}]),t}(n.Component),D={updateUser:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("update user action"),n({type:"USER_UPDATE_REQUEST"}),a.prev=2,a.next=5,N.a.post("http://localhost:5000/users/update",e);case 5:r=a.sent,n({type:"USER_UPDATE_SUCCESS",payload:r.data}),alert("User info is successfully updated!"),t.push("/"),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(2),o=a.t0.response.data.error,console.log(o),n({type:"USER_UPDATE_FAILURE",payload:o});case 16:case"end":return a.stop()}}),a,null,[[2,11]])})));return function(e){return a.apply(this,arguments)}}()}},F=(Object(g.a)((function(e){return{user:e.user}}),D)(I),a(21)),G=a(48);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H={isAuthenticated:!1,isLoading:!1},z=a(49),W=a.n(z),X=[G.a],q=Object(F.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_REQUEST":return Q({},e,{isLoading:!0});case"USER_LOGIN_SUCCESS":return Q({isAuthenticated:!0,isLoading:!1},t.payload);case"USER_LOGIN_FAILURE":return{isAuthenticated:!1,isLoading:!1,error:t.payload};case"USER_REGISTER_REQUEST":return Q({},e,{isLoading:!0});case"USER_REGISTER_SUCCESS":return Q({isAuthenticated:!0,isLoading:!1},t.payload);case"USER_REGISTER_FAILURE":return{isAuthenticated:!1,isLoading:!1,error:t.payload};case"USER_GET_REQUEST":return Q({},e,{isLoading:!0});case"USER_GET_SUCCESS":return Q({},e,{isLoading:!1},t.payload);case"USER_GET_FAILURE":return Q({},e,{isLoading:!1,error:t.payload});case"USER_UPDATE_REQUEST":return Q({},e,{isLoading:!0});case"USER_UPDATE_SUCCESS":return Q({},e,{isLoading:!1},t.payload);case"USER_UPDATE_FAILURE":return Q({},e,{isLoading:!1,error:t.payload});case"SET_AUTHENTICATED":return Q({},e,{isAuthenticated:!0});case"SET_UNAUTHENTICATED":return H;default:return e}},recipe:W.a}),M=Object(F.e)(q,{},Object(F.d)(F.a.apply(void 0,X),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),J=a(50),K=a.n(J),V=a(28),$=a(19),Y=(Object(g.a)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.component,a=e.isAuthenticated,n=Object(V.a)(e,["component","isAuthenticated"]);return r.a.createElement($.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement($.a,{to:"/login"})}}))})),Object(g.a)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.component,a=e.isAuthenticated,n=Object(V.a)(e,["component","isAuthenticated"]);return r.a.createElement($.b,Object.assign({},n,{render:function(e){return a?r.a.createElement($.a,{to:"/"}):r.a.createElement(t,e)}}))})),localStorage.token);Y&&(1e3*K()(Y).exp<Date.now()?(M.dispatch(O()),window.location.href="/login"):(M.dispatch({type:"SET_AUTHENTICATED"}),N.a.defaults.headers.common.Authorization=Y,M.dispatch(function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"USER_GET_REQUEST"}),e.prev=1,e.next=4,N.a.get("http://localhost:5000/users/");case 4:a=e.sent,t({type:"USER_GET_SUCCESS",payload:a.data}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),n=e.t0.response.data.error,console.log(n),t({type:"USER_GET_FAILURE",payload:n});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())));var Z=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return window.location.href="https://github.com/Project-MKB/project-mkb/tree/dev/backend",null}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.40d72c3c.chunk.js.map